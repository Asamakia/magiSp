================================================================================
マジックスピリット カードゲーム 開発ロードマップ
================================================================================
作成日: 2025年
現在のステータス: プロトタイプ完成（コア機能実装済み）

================================================================================
【完了済み】Phase 1: プロトタイプ
================================================================================
✅ 基本ルール実装
   - ライフポイント 6000
   - SPトークン管理（最大10、アクティブ/レスト状態）
   - 5フェイズターン進行（ターン開始→ドロー→メイン→バトル→エンド）
   - 先攻1ターン目の攻撃制限

✅ カードシステム
   - モンスター召喚（コスト支払い）
   - 魔法カード発動
   - フィールドカード設置
   - 30種類のサンプルカード実装

✅ バトルシステム
   - モンスター攻撃
   - 反撃ダメージ（攻撃力の30%）
   - ダイレクトアタック
   - ダメージ軽減（モンスター存在時50%、フィールドカード存在時75%）

✅ UI/UX
   - 2人対戦画面
   - カード選択・効果表示
   - HPバー、SPトークン表示
   - ゲームログ

================================================================================
【次のステップ】Phase 2: カードデータ完全実装
================================================================================
優先度: ★★★（高）
目的: 全433枚のカードを使用可能にする

□ 2-1. CSVパーサーの実装
   - /mnt/project/cardlist.csv を読み込み
   - カードID、名称、属性、コスト、種類、キーワード能力、攻撃力、HP、
     カテゴリ、効果、フレーバーテキストをパース
   - 複数行にまたがる効果テキストの対応

□ 2-2. カードデータ構造の拡張
   - キーワード能力フィールドの追加
   - カテゴリ（【ドラゴン】【スライム】等）の配列化
   - 禁忌カードフラグの追加

□ 2-3. カード種類の完全対応
   - monster（モンスター）
   - magic（魔法）
   - field（フィールド）
   - phase（フェイズカード）← 新規追加

================================================================================
【次のステップ】Phase 3: 技システム実装
================================================================================
優先度: ★★★（高）
目的: チャージによる基本技・上級技を実装

□ 3-1. チャージシステム
   - 属性カードをモンスターに重ねる機能
   - 1モンスターにつき最大2枚チャージ
   - 1ターンに1回のチャージ制限（プレイヤー全体）
   - 属性チャージ vs SPチャージの選択

□ 3-2. 基本技の実装
   - 1枚チャージで発動
   - 同属性カードのみ発動可能
   - 「任意」指定の場合は全属性対応
   - 技発動後もチャージカードは場に残る

□ 3-3. 上級技の実装
   - 2枚チャージで発動
   - 強力な効果
   - 一部モンスター限定

□ 3-4. 技効果のパーサー
   - 効果テキストから技を抽出
   - 「基本技：」「上級技：」のパターンマッチ
   - ダメージ、回復、状態変化等の効果分類

================================================================================
【次のステップ】Phase 4: キーワード能力実装
================================================================================
優先度: ★★☆（中）
目的: 特殊能力を持つカードの差別化

□ 4-1. 主要キーワード能力
   - 【覚醒】: 条件達成で攻撃力上昇
   - 【刹那詠唱】: SP追加で相手ターンに発動可能
   - 【死触】: ダメージを与えれば即破壊
   - 【魔障壁】: 魔法耐性
   - 【禁忌カード】: デッキに1枚制限

□ 4-2. 状態異常システム
   - 眠り: 行動不能、効果無効、50%で解除
   - 凍結: 行動不能
   - 行動不能: 攻撃・効果使用不可
   - 守護: ダメージ半減（1回）
   - 効果無効: 効果が発動しない

□ 4-3. 状態異常の表示
   - モンスターカードに状態アイコン表示
   - ターン経過による自動解除

================================================================================
【次のステップ】Phase 5: フェイズカード実装
================================================================================
優先度: ★★☆（中）
目的: 段階的強化システムの実装

□ 5-1. フェイズカードの基本
   - SP3で場に設置
   - 初期効果 + 3段階の強化効果
   - 同属性カードをチャージして段階進行

□ 5-2. 段階効果の処理
   - チャージごとに次の段階へ
   - 効果は上書き（前の段階は無効）
   - 最大3枚チャージ、1ターン1枚制限

□ 5-3. 最終フェイズ処理
   - 3枚チャージ後、第3段階発動
   - フェイズカードを墓地へ送る
   - チャージしたカードも一緒に墓地へ

================================================================================
【次のステップ】Phase 6: 効果エンジン実装
================================================================================
優先度: ★★☆（中）
目的: カード効果の自動処理

□ 6-1. トリガー効果
   - 召喚時効果
   - 破壊時効果
   - バトルフェイズ開始時効果
   - ターン終了時効果

□ 6-2. 効果の種類
   - ダメージ（単体/全体/プレイヤー）
   - 回復（HP/ライフ）
   - バフ/デバフ（攻撃力/HP増減）
   - サーチ（デッキから手札へ）
   - 蘇生（墓地から場へ）
   - 破壊（モンスター/カード）
   - コントロール奪取

□ 6-3. 効果テキストパーサー
   - 正規表現による効果抽出
   - 数値パラメータの取得
   - 対象選択の判定

================================================================================
【次のステップ】Phase 7: AI対戦モード
================================================================================
優先度: ★☆☆（低〜中）
目的: 1人でもプレイ可能にする

□ 7-1. 基本AI
   - ランダムカード選択
   - コストに応じた召喚判断
   - 攻撃可能なら攻撃

□ 7-2. 中級AI
   - 属性相性の考慮
   - 有利な攻撃対象の選択
   - 魔法カードの適切な使用

□ 7-3. 上級AI（将来）
   - デッキシナジーの理解
   - 複数ターン先の計画
   - 相手の手札予測

================================================================================
【次のステップ】Phase 8: デッキ構築
================================================================================
優先度: ★☆☆（低）
目的: カスタムデッキでの対戦

□ 8-1. デッキ構築画面
   - 全カードリスト表示
   - フィルター（属性、コスト、種類）
   - 検索機能

□ 8-2. デッキルールの適用
   - 40枚固定
   - 同一カード3枚まで
   - 禁忌カード1枚まで

□ 8-3. デッキ保存/読み込み
   - ローカルストレージへの保存
   - プリセットデッキ

================================================================================
【次のステップ】Phase 9: UI/UX改善
================================================================================
優先度: ★☆☆（低）
目的: より遊びやすく、見やすく

□ 9-1. カードデザイン改善
   - カードイラスト表示エリア
   - 属性アイコン
   - レアリティ表示

□ 9-2. アニメーション追加
   - カード召喚エフェクト
   - 攻撃エフェクト
   - ダメージ表示

□ 9-3. サウンド（将来）
   - BGM
   - 効果音

□ 9-4. レスポンシブ対応
   - モバイル対応
   - 画面サイズ調整

================================================================================
【推奨開発順序】
================================================================================
1. Phase 2: カードデータ完全実装 ← 最優先
2. Phase 3: 技システム実装 ← ゲーム性向上
3. Phase 4: キーワード能力実装
4. Phase 5: フェイズカード実装
5. Phase 6: 効果エンジン実装
6. Phase 7: AI対戦モード
7. Phase 8: デッキ構築
8. Phase 9: UI/UX改善

================================================================================
【技術的な注意点】
================================================================================
- useCallbackの依存配列に状態変数を含める
- 状態の直接参照（getCurrentPlayerData()経由ではなく）
- 複雑な効果はテキストパーサーで対応
- パフォーマンス：大量カードのレンダリング最適化

================================================================================
【参照ファイル】
================================================================================
- ルール仕様書: /mnt/project/マジックスピリット_公式ルール仕様書_ver2_11.txt
- フェイズカードルール: /mnt/project/マジックスピリット_-_フェイズカードルール__ver1_0_.txt
- 技発動ルール: /mnt/project/マジックスピリット_-_属性カードをエネルギーとする技発動ルール__ver1_1_.txt
- カードリスト: /mnt/project/cardlist.csv

================================================================================
