================================================================================
マジックスピリット カードゲーム 開発ロードマップ
================================================================================
最終更新日: 2025-11-29
総合進捗率: 96%

完了履歴は CHANGELOG.md を参照

================================================================================
【進捗サマリー】
================================================================================

Phase 1: プロトタイプ              100% 完了
Phase 2: カードデータ完全実装       95% 完了
Phase 3: 技システム実装             95% 完了 (技1回制限・SPチャージ実装)
Phase 4: キーワード能力実装         95% 完了 (毒侵・壮麗・犠現追加)
Phase 5: フェイズカード実装         95% 完了
Phase 6: 効果エンジン実装           80% 完了
Phase 6.5: トリガーシステム         95% 完了 (220+カード)
Phase 7: 常時効果システム           95% 完了 (45カード)
Phase 8: AI対戦モード               95% 完了 (スキル有効性チェック追加)
Phase 9: デッキ構築                 90% 完了 ⭐ NEW
Phase 10: カードコレクション        95% 完了 ⭐⭐⭐ NEW
Phase 11: 市場システム              95% 完了 ⭐⭐⭐ NEW
Phase 12: UI/UX改善                 65% 進行中

================================================================================
【新規完了】Phase 9: デッキ構築 (90% 完了)
================================================================================
完了済み:
- 40枚固定、同一カード4枚まで、禁忌カード1枚まで
- デッキ構築画面（DeckBuilder.jsx - 689行）
  - 所持カードから40枚デッキを作成
  - フィルター機能（属性、コスト、種類）
  - 検索機能
  - 枚数制限表示
- デッキ管理画面（DeckList.jsx - 446行）
  - デッキ一覧表示・作成・編集・削除
  - デッキ統計表示（カード分布、コストカーブ）
  - プリセットデッキをレアリティ適用してインポート
- デッキ保存/読み込み（localStorage）

未実装:
- デッキシェア機能（エクスポート/インポート）
- デッキ診断・アドバイス機能

================================================================================
【新規完了】Phase 10: カードコレクション (95% 完了)
================================================================================
完了済み:
- カード価値計算システム（基礎価値・ティアS/A/B/C/D・レアリティ10種）
- コレクション管理（カードID + レアリティ + 枚数）
- 経済システム（通貨G、初期10,000G、対戦報酬5,000G、パック3,500G）
- パック開封（5枚/パック、闘鍋形式）
- ショップ画面（ShopScreen.jsx - 576行）
- コレクション画面（CollectionScreen.jsx - 380行）
- パック開封演出（PackOpening.jsx - 487行）
- カード詳細モーダル（CardDetail.jsx - 473行）
- スターターデッキ（新規プレイヤーに炎ドラゴンデッキをC版で付与）
- 対戦報酬（ゲーム終了時5,000G + 勝利時パック1個）
- 永続化（localStorage、将来IndexedDB/クラウド移行可能な抽象化）

未実装:
- 属性別パック ← 次の実装候補
- カードトレード機能

================================================================================
【新規完了】Phase 11: 動的市場システム (95% 完了)
================================================================================
完了済み:
- 市場エンジン（marketEngine.js - 329行）
- 週間トレンド（15種類: 属性優勢、コスト環境、レアリティ注目、カオスなど）
- デイリーニュース（8パターン自動生成: 基本、人物、場所、噂話、比較、需給、季節、ストーリー）
- 突発イベント（25種類: 高騰10種、暴落8種、特殊7種）
- 価格変動（上限+100%、下限-50%）
- 価格履歴（30戦分）
- 市場データエンティティ（64以上: NPC、場所、理由、噂など）
- 市場分析画面（MarketAnalysis.jsx - 680行）
  - 7タブ構成: 総合(MSI)・属性・カテゴリ・ティア・資産・イベント・検索
  - 価格履歴チャート（スパークライン、属性別推移）
- 総資産推移システム（assetCalculator.js - 245行）
  - 資産スナップショット記録・履歴管理
  - 5つの表示モード選択

未実装:
- NPCとの直接取引
- 市場イベント予測機能

================================================================================
【残りタスク】Phase 4: キーワード能力
================================================================================
進捗: 95%

完了済み:
- 【刹那詠唱】: チェーンポイントシステム、確認UI、コスト計算
- 状態異常システム: 15種類（眠り、凍結、雷撃、濡れ、守護、毒、寄生など）
- 【寄生】: PARASITE状態異常タイプ（ターン開始ATK減少、効果無効化）
- 【死触】: ダメージを与えれば即破壊（戦闘システム統合）
- 【魔障壁】: 魔法耐性（MAGIC_NEGATION常時効果）
- 【深蝕】: エンドフェイズ攻撃力減少（トリガー実装済み）
- 【残魂】: 破壊時攻撃力-1000で場に戻る（トリガー実装済み）
- 【魂結】: リンク効果（水属性6カード実装済み）
- 【覚醒】: 条件達成で攻撃力上昇（実装済み）
- 【毒侵】: ダイレクトアタック成功時に毒状態付与（実装済み）
- 【壮麗】: 同名カード捨てて追加効果（6種類の効果、実装済み）
- 【犠現】: 生贄モンスターでコスト軽減（実装済み）

未実装:
- 【変幻身】: 形態変化
- 【威圧吼】: 攻撃時追加効果
- 【未来予知】: デッキ操作

================================================================================
【残りタスク】Phase 12: UI/UX改善
================================================================================
進捗: 65%

完了済み:
- 魔法カード専用発動ボタン
- フィールド/フェイズカード情報パネル
- 手札選択システム、コスト軽減表示
- 墓地UI、デッキトップ確認UI
- カードコレクション/ショップ/デッキ編集ボタン
- 市場分析画面

未実装:
- カード召喚/攻撃アニメーション
- カードイラスト表示エリア
- モバイル対応
- サウンド（BGM、効果音）

================================================================================
【残りタスク】カード実装
================================================================================

カード固有エフェクト:
- 実装済み: 108カード / 433 (25%)
- 残り: 325カード

カード固有トリガー:
- 実装済み: 220カード / 433 (51%)
- 残り: 213カード

高度な効果（未実装）:
- SPトークン操作（増減、奪取）
- コントロール奪取（モンスターの所有権変更）
- 永続効果（ターン跨ぎのバフ/デバフ）

================================================================================
【開発優先順位】
================================================================================

━━ 即時実装候補（プレイ体験向上に直結）━━

1. 残りのキーワード能力実装
   - 【毒侵】【変幻身】【壮麗】【犠現】
   - 既存システム（常時効果・トリガー・状態異常）を活用可能
   - 推定工数: 中

2. 残りカードのエフェクト・トリガー実装
   - 重要カード・人気カードから優先
   - 既存テンプレートとヘルパーで実装容易

━━ 中期実装候補（ゲーム完成度向上）━━

3. 高度な効果の実装
   - SPトークン操作、コントロール奪取、永続効果

4. 商人NPCシステム
   - merchant_system.md に設計済み（未実装）
   - NPCごとに特化した品揃え・特殊割引

━━ 長期実装候補（ゲーム拡張）━━

5. UI/UX改善
   - アニメーション、カードイラスト、モバイル対応、サウンド

6. デッキ専用AI
   - ドラゴンデッキ、氷眠の檻デッキ等の専用AI

7. 属性別パック・カードトレード機能
   - コレクションシステムの拡張

================================================================================
【技術的改善点】
================================================================================

現在の強み:
- Reactのhooksを適切に使用
- モジュラーアーキテクチャ（関心の分離が明確）
- 効果エンジンのアーキテクチャが確立
- 再利用可能なエフェクトヘルパーライブラリ
- 堅牢なCSVパーサー
- カードコレクションシステム（対戦システムから独立）
- 動的市場システム（週間トレンド＋デイリーニュース＋突発イベント）
- AIスキル有効性チェック（無限ループ防止）

将来の推奨リファクタリング:
- 永続効果管理システムの追加
- キーワード能力システムの拡張（keywordAbilities/）
- バトルロジックの分離（battleSystem.js）
- フェーズシステムの分離（phaseSystem.js）
- IndexedDB/クラウドへの永続化層移行

================================================================================
